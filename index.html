<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Jogo do N√∫mero Secreto - Teste sua sorte e habilidade matem√°tica!">
    <meta name="keywords" content="jogo, n√∫mero secreto, matem√°tica, l√≥gica">
    <meta name="author" content="L√≥gica de Programa√ß√£o">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Jogo do N√∫mero Secreto">
    <meta property="og:description" content="Teste sua sorte e habilidade matem√°tica neste jogo interativo!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://numero-secreto-game.vercel.app">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/src/assets/images/favicon.ico">
    
    <!-- Preconnect para fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- CSS Styles -->
    <link rel="stylesheet" href="/src/styles/main.css">
    <link rel="stylesheet" href="/src/styles/components.css">
    <link rel="stylesheet" href="/src/styles/animations.css">
    <link rel="stylesheet" href="/src/styles/responsive.css">
    
    <title>Jogo do N√∫mero Secreto</title>
</head>
<body>
    <!-- Floating Particles Background -->
    <div class="floating-particles" id="particles"></div>
    
    <!-- Background Audio -->
    <audio id="backgroundAudio" loop preload="auto" style="display: none;">
        <source src="/src/assets/sounds/start.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Sound Effects -->
    <audio id="clickSound" preload="auto" style="display: none;">
        <source src="/src/assets/sounds/click.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="errorSound" preload="auto" style="display: none;">
        <source src="/src/assets/sounds/error.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="successSound" preload="auto" style="display: none;">
        <source src="/src/assets/sounds/success.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="victorySound" preload="auto" style="display: none;">
        <source src="/src/assets/sounds/victory.mp3" type="audio/mpeg">
    </audio>
    
    <!-- Main Container -->
    <main class="container" id="gameContainer">
        <!-- Game Header Component -->
        <header class="game-header" id="gameHeader">
            <div class="header-content">
                <h1 class="title" id="gameTitle">
                    <span class="title-icon">üéØ</span>
                    <span class="title-text">N√öMERO SECRETO</span>
                    <span class="title-version">v2.0</span>
                </h1>
                <p class="subtitle" id="gameSubtitle">
                    Descubra o n√∫mero misterioso!
                </p>
                <div class="header-stats" id="headerStats">
                    <div class="header-stat">
                        <span class="stat-icon">üéÆ</span>
                        <span class="stat-value" id="quickGamesCount">0</span>
                        <span class="stat-label">Jogos</span>
                    </div>
                    <div class="header-stat">
                        <span class="stat-icon">üèÜ</span>
                        <span class="stat-value" id="quickWinsCount">0</span>
                        <span class="stat-label">Vit√≥rias</span>
                    </div>
                    <div class="header-stat">
                        <span class="stat-icon">üî•</span>
                        <span class="stat-value" id="quickStreakCount">0</span>
                        <span class="stat-label">Sequ√™ncia</span>
                    </div>
                </div>
            </div>
            
            <div class="header-controls" id="headerControls">
                <button class="header-btn" id="settingsBtn" title="Configura√ß√µes">
                    <span class="btn-icon">‚öôÔ∏è</span>
                </button>
                <button class="header-btn" id="statsBtn" title="Estat√≠sticas Detalhadas">
                    <span class="btn-icon">üìä</span>
                </button>
                <button class="header-btn" id="helpBtn" title="Ajuda">
                    <span class="btn-icon">‚ùì</span>
                </button>
                <button class="header-btn" id="themeBtn" title="Alternar Tema">
                    <span class="btn-icon">üåô</span>
                </button>
            </div>
        </header>

        <!-- Difficulty Selector Component -->
        <section class="difficulty-section" id="difficultySection">
            <div class="difficulty-selector-content">
                <div class="difficulty-header" id="difficultyHeader">
                    <div class="header-content">
                        <h3 class="section-title">
                            <span class="title-icon">üéöÔ∏è</span>
                            <span class="title-text">Escolha a Dificuldade</span>
                        </h3>
                        <div class="difficulty-info" id="difficultyInfo">
                            <span class="info-text">Selecione o n√≠vel de desafio</span>
                        </div>
                    </div>
                    <div class="difficulty-stats" id="difficultyStats">
                        <div class="stat-item">
                            <span class="stat-icon">üìä</span>
                            <span class="stat-value" id="currentRange">1-10</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üéØ</span>
                            <span class="stat-value" id="currentAttempts">5</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">‚≠ê</span>
                            <span class="stat-value" id="currentMultiplier">1x</span>
                        </div>
                    </div>
                </div>

                <div class="difficulty-grid" id="difficultyGrid">
                    <button class="difficulty-btn active" data-difficulty="easy">
                        <div class="btn-header">
                            <div class="btn-icon">üòä</div>
                            <div class="btn-name">F√°cil</div>
                        </div>
                        <div class="btn-details">
                            <div class="detail-range">1-10</div>
                            <div class="detail-attempts">5 tentativas</div>
                            <div class="detail-multiplier">1x pontos</div>
                        </div>
                        <div class="btn-footer">
                            <div class="btn-status">Dispon√≠vel</div>
                        </div>
                        <div class="active-indicator"></div>
                    </button>
                    
                    <button class="difficulty-btn" data-difficulty="medium">
                        <div class="btn-header">
                            <div class="btn-icon">ü§î</div>
                            <div class="btn-name">M√©dio</div>
                        </div>
                        <div class="btn-details">
                            <div class="detail-range">1-100</div>
                            <div class="detail-attempts">8 tentativas</div>
                            <div class="detail-multiplier">2x pontos</div>
                        </div>
                        <div class="btn-footer">
                            <div class="btn-status">Dispon√≠vel</div>
                        </div>
                    </button>
                    
                    <button class="difficulty-btn" data-difficulty="hard">
                        <div class="btn-header">
                            <div class="btn-icon">üò§</div>
                            <div class="btn-name">Dif√≠cil</div>
                        </div>
                        <div class="btn-details">
                            <div class="detail-range">1-1000</div>
                            <div class="detail-attempts">12 tentativas</div>
                            <div class="detail-multiplier">3x pontos</div>
                        </div>
                        <div class="btn-footer">
                            <div class="btn-status">Dispon√≠vel</div>
                        </div>
                    </button>
                    
                    <button class="difficulty-btn" data-difficulty="expert">
                        <div class="btn-header">
                            <div class="btn-icon">üî•</div>
                            <div class="btn-name">Expert</div>
                        </div>
                        <div class="btn-details">
                            <div class="detail-range">1-5000</div>
                            <div class="detail-attempts">15 tentativas</div>
                            <div class="detail-multiplier">5x pontos</div>
                        </div>
                        <div class="btn-footer">
                            <div class="btn-status">Dispon√≠vel</div>
                        </div>
                    </button>
                </div>
            </div>
        </section>

        <!-- Game Board Component -->
        <section class="game-board" id="gameBoard">
            <div class="game-board-content">
                <!-- Game Info Section -->
                <div class="game-info-section" id="gameInfoSection">
                    <div class="game-status-card">
                        <div class="status-header">
                            <div class="status-icon" id="gameStatusIcon">üéÆ</div>
                            <div class="status-text" id="gameStatusText">Pronto para come√ßar!</div>
                        </div>
                        
                        <div class="status-details">
                            <div class="detail-grid">
                                <div class="detail-card">
                                    <div class="detail-icon">üìä</div>
                                    <div class="detail-content">
                                        <div class="detail-label">Intervalo</div>
                                        <div class="detail-value" id="gameRange">1 - 10</div>
                                    </div>
                                </div>
                                
                                <div class="detail-card">
                                    <div class="detail-icon">üéØ</div>
                                    <div class="detail-content">
                                        <div class="detail-label">Tentativas</div>
                                        <div class="detail-value" id="gameAttempts">0/5</div>
                                    </div>
                                </div>
                                
                                <div class="detail-card">
                                    <div class="detail-icon">‚≠ê</div>
                                    <div class="detail-content">
                                        <div class="detail-label">Pontua√ß√£o</div>
                                        <div class="detail-value" id="gameScore">0</div>
                                    </div>
                                </div>
                                
                                <div class="detail-card">
                                    <div class="detail-icon">‚è±Ô∏è</div>
                                    <div class="detail-content">
                                        <div class="detail-label">Tempo</div>
                                        <div class="detail-value" id="gameTime">00:00</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Input Section Component -->
        <section class="input-section" id="inputSection">
            <div class="input-section-content">
                <div class="input-wrapper" id="inputWrapper">
                    <div class="input-container">
                        <input 
                            type="number" 
                            class="number-input" 
                            id="numberInput" 
                            placeholder="Digite seu palpite..."
                            min="1"
                            max="10"
                            autocomplete="off"
                            spellcheck="false"
                        >
                        <div class="input-overlay" id="inputOverlay">
                            <div class="input-glow"></div>
                            <div class="input-particles" id="inputParticles"></div>
                        </div>
                    </div>
                    
                    <div class="input-status" id="inputStatus">
                        <div class="status-indicator" id="statusIndicator">üí°</div>
                        <div class="status-text" id="statusText">Digite um n√∫mero</div>
                    </div>
                </div>

                <div class="controls-section" id="controlsSection">
                    <button class="action-btn action-btn-primary" id="submitBtn">
                        <span class="btn-icon">üéØ</span>
                        <span class="btn-text">Tentar</span>
                        <span class="btn-shortcut">Enter</span>
                    </button>
                    
                    <button class="action-btn action-btn-secondary" id="newGameBtn">
                        <span class="btn-icon">üîÑ</span>
                        <span class="btn-text">Novo Jogo</span>
                        <span class="btn-shortcut">N</span>
                    </button>
                    
                    <button class="action-btn action-btn-hint" id="hintBtn" style="display: none;">
                        <span class="btn-icon">üí°</span>
                        <span class="btn-text">Dica</span>
                        <span class="btn-cost">-100</span>
                    </button>
                </div>
            </div>
        </section>

        <!-- Message Display Component -->
        <section class="message-area" id="messageArea">
            <div class="message-display-content">
                <div class="main-message" id="mainMessage">
                    <div class="message-wrapper">
                        <div class="message-icon" id="messageIcon">üéÆ</div>
                        <div class="message-content">
                            <div class="message-text" id="messageText">
                                Bem-vindo! Escolha um n√∫mero e tente sua sorte!
                            </div>
                            <div class="message-subtext" id="messageSubtext"></div>
                        </div>
                        <div class="message-actions" id="messageActions"></div>
                    </div>
                    
                    <div class="message-progress" id="messageProgress">
                        <div class="progress-bar" id="messageProgressBar"></div>
                    </div>
                </div>

                <div class="toast-container" id="toastContainer"></div>
                <div class="achievements-container" id="achievementsContainer"></div>
                <div class="quick-feedback" id="quickFeedback"></div>
            </div>
        </section>

        <!-- Stats Panel Component -->
        <section class="stats-panel" id="statsPanel">
            <div class="stats-panel-content">
                <div class="stats-header" id="statsHeader">
                    <div class="stats-title">
                        <span class="title-icon">üìä</span>
                        <span class="title-text">Suas Estat√≠sticas</span>
                    </div>
                    <div class="stats-actions">
                        <button class="stats-action-btn" id="refreshStatsBtn" title="Atualizar">
                            <span class="btn-icon">üîÑ</span>
                        </button>
                        <button class="stats-action-btn" id="exportStatsBtn" title="Exportar">
                            <span class="btn-icon">üì§</span>
                        </button>
                        <button class="stats-action-btn" id="resetStatsBtn" title="Resetar">
                            <span class="btn-icon">üóëÔ∏è</span>
                        </button>
                    </div>
                </div>

                <div class="main-stats" id="mainStats">
                    <div class="stat-card" data-stat="gamesPlayed">
                        <div class="stat-icon">üéÆ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalGames">0</div>
                            <div class="stat-label">Jogos</div>
                            <div class="stat-trend" id="gamesTrend"></div>
                        </div>
                        <div class="stat-sparkline" id="gamesSparkline"></div>
                    </div>

                    <div class="stat-card" data-stat="gamesWon">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="totalWins">0</div>
                            <div class="stat-label">Vit√≥rias</div>
                            <div class="stat-trend" id="winsTrend"></div>
                        </div>
                        <div class="stat-sparkline" id="winsSparkline"></div>
                    </div>

                    <div class="stat-card" data-stat="winRate">
                        <div class="stat-icon">üìà</div>
                        <div class="stat-content">
                            <div class="stat-value" id="winRate">0%</div>
                            <div class="stat-label">Taxa de Vit√≥ria</div>
                            <div class="stat-trend" id="winRateTrend"></div>
                        </div>
                        <div class="stat-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="winRateProgress"></div>
                            </div>
                        </div>
                    </div>

                    <div class="stat-card" data-stat="bestScore">
                        <div class="stat-icon">‚≠ê</div>
                        <div class="stat-content">
                            <div class="stat-value" id="bestScore">0</div>
                            <div class="stat-label">Melhor Pontua√ß√£o</div>
                            <div class="stat-trend" id="scoreTrend"></div>
                        </div>
                        <div class="stat-achievement" id="scoreAchievement"></div>
                    </div>

                    <div class="stat-card" data-stat="currentStreak">
                        <div class="stat-icon">üî•</div>
                        <div class="stat-content">
                            <div class="stat-value" id="currentStreak">0</div>
                            <div class="stat-label">Sequ√™ncia Atual</div>
                            <div class="stat-trend" id="streakTrend"></div>
                        </div>
                        <div class="streak-flames" id="streakFlames"></div>
                    </div>

                    <div class="stat-card" data-stat="avgAttempts">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-content">
                            <div class="stat-value" id="avgAttempts">0</div>
                            <div class="stat-label">M√©dia de Tentativas</div>
                            <div class="stat-trend" id="attemptsTrend"></div>
                        </div>
                        <div class="efficiency-meter" id="efficiencyMeter"></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Victory Modal -->
    <div class="modal-overlay" id="victoryModal" style="display: none;">
        <div class="modal-content victory-modal">
            <div class="modal-header">
                <h2>üèÜ Parab√©ns!</h2>
            </div>
            <div class="modal-body">
                <p id="victoryMessage">Voc√™ descobriu o n√∫mero secreto!</p>
                <div class="victory-stats">
                    <div class="victory-stat">
                        <span class="victory-label">N√∫mero:</span>
                        <span class="victory-value" id="victoryNumber">-</span>
                    </div>
                    <div class="victory-stat">
                        <span class="victory-label">Tentativas:</span>
                        <span class="victory-value" id="victoryAttempts">-</span>
                    </div>
                    <div class="victory-stat">
                        <span class="victory-label">Pontua√ß√£o:</span>
                        <span class="victory-value" id="victoryScore">-</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="playAgainBtn">
                    üéÆ Jogar Novamente
                </button>
                <button class="btn btn-secondary" id="closeModalBtn">
                    ‚ùå Fechar
                </button>
            </div>
        </div>
    </div>

    <!-- Audio Manager Script -->
    <script>
        class AudioManager {
            constructor() {
                this.sounds = {
                    background: document.getElementById('backgroundAudio'),
                    click: document.getElementById('clickSound'),
                    error: document.getElementById('errorSound'),
                    success: document.getElementById('successSound'),
                    victory: document.getElementById('victorySound')
                };
                
                this.isEnabled = true;
                this.volumes = {
                    background: 0.2,
                    click: 0.7,
                    error: 0.8,
                    success: 0.8,
                    victory: 0.9
                };
                
                this.init();
            }
            
            init() {
                Object.keys(this.sounds).forEach(key => {
                    if (this.sounds[key]) {
                        this.sounds[key].volume = this.volumes[key];
                    }
                });
                
                this.startBackgroundMusic();
                this.setupGlobalClickHandler();
            }
            
            play(soundName) {
                if (!this.isEnabled || !this.sounds[soundName]) return;
                
                const sound = this.sounds[soundName];
                sound.currentTime = 0;
                sound.play().catch(e => console.log('Audio play failed:', e));
            }
            
            startBackgroundMusic() {
                if (this.sounds.background) {
                    this.sounds.background.play().catch(e => {
                        console.log('Background music failed to start:', e);
                    });
                }
            }
            
            setupGlobalClickHandler() {
                document.addEventListener('click', (e) => {
                    if (e.target.matches('button, .btn, .difficulty-btn, .interactive')) {
                        this.play('click');
                    }
                });
            }
            
            toggle() {
                this.isEnabled = !this.isEnabled;
                if (!this.isEnabled && this.sounds.background) {
                    this.sounds.background.pause();
                } else if (this.isEnabled && this.sounds.background) {
                    this.sounds.background.play();
                }
            }
        }
        
        window.audioManager = new AudioManager();
    </script>

    <!-- Loading Scripts -->
    <script type="module">
        import { GameConfig } from '/src/js/config.js';
        import { GameLogic } from '/src/js/game.js';
        import { UIManager } from '/src/js/ui.js';
        import { StorageManager } from '/src/js/storage.js';
        import { Utils } from '/src/js/utils.js';
        import { audioSystem } from '/src/js/audio.js';
        
        import '/src/components/game-header.js';
        import '/src/components/game-board.js';
        import '/src/components/input-section.js';
        import '/src/components/message-display.js';
        import '/src/components/stats-panel.js';
        import '/src/components/difficulty-selector.js';

        document.addEventListener('DOMContentLoaded', () => {
            console.log('Inicializando Jogo do N√∫mero Secreto...');
            
            try {
                // Inicializar sistema de √°udio
                window.audioSystem = audioSystem;
                
                // Inicializar componentes principais
                const storage = new StorageManager();
                const ui = new UIManager();
                const game = new GameLogic(storage, ui);
                
                // Atualizar UI inicial
                ui.updateStats(storage.getStats());
                Utils.createFloatingParticles();
                
                // Expor inst√¢ncias globalmente para debug
                window.gameInstance = game;
                window.uiManager = ui;
                window.storageManager = storage;
                
                console.log('Jogo inicializado com sucesso!');
                
                // Configurar eventos de √°udio personalizados
                document.addEventListener('gameWon', () => {
                    audioSystem.play('success');
                    setTimeout(() => audioSystem.play('victory'), 500);
                });
                
                document.addEventListener('gameLost', () => {
                    audioSystem.play('error');
                });
                
                document.addEventListener('gameMessage', (e) => {
                    const { type } = e.detail;
                    if (type === 'error') {
                        audioSystem.play('error');
                    } else if (type === 'success') {
                        audioSystem.play('success');
                    }
                });
                
            } catch (error) {
                console.error('Erro ao inicializar o jogo:', error);
                // Fallback simples em caso de erro
                document.body.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: white;">
                        <h2>Erro ao carregar o jogo</h2>
                        <p>Por favor, recarregue a p√°gina.</p>
                        <button onclick="location.reload()" style="padding: 1rem 2rem; font-size: 1rem;">
                            Recarregar
                        </button>
                    </div>
                `;
            }
        });
    </script>
    
    <!-- Fallback for older browsers -->
    <noscript>
        <div style="text-align: center; padding: 2rem; color: white; background: #041832;">
            <h2>JavaScript Necess√°rio</h2>
            <p>Este jogo requer JavaScript para funcionar. Por favor, habilite JavaScript em seu navegador.</p>
        </div>
    </noscript>
</body>
</html>
